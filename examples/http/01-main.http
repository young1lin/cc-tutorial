# DeepSeek
@DEEP_SEEK_BASE_URL = https://api.deepseek.com/chat/completions
@DEEP_SEEK_BEARER_TOKEN = Bearer {{$dotenv DEEPSEEK_API_KEY}}

# 智谱 GLM
@GLM_BASE_URL = https://open.bigmodel.cn/api/coding/paas/v4/chat/completions
@GLM_BEARER_TOKEN = Bearer {{$dotenv GLM_API_KEY}}

# 通用变量
@LOCALE = zh-CN
@main_prompt = You are an intelligent customer service agent named Alice. Your main role is to help users answer their questions.
@response_language = You must respond in the locale specified by the LOCALE variable ({{LOCALE}}).All your responses should be in the language corresponding to this locale code.Do not use any other language regardless of the user's input language.


### 强制要求用户的返回指定语言 (非流式)
POST {{DEEP_SEEK_BASE_URL}} HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: {{DEEP_SEEK_BEARER_TOKEN}}

{
  "messages": [
    {
      "content": "{{main_prompt}} {{response_language}}",
      "role": "system"
    },
    {
      "content": "Hello, who are you?",
      "role": "user"
    }
  ],
  "model": "deepseek-chat",
  "stream": true,
  "temperature": 0
}

### Single request
POST {{GLM_BASE_URL}} HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: {{GLM_BEARER_TOKEN}}

{
  "messages": [
    {
      "content": "{{main_prompt}}",
      "role": "system"
    },
    {
      "content": "Hello, who are you?",
      "role": "user"
    }
  ],
  "model": "GLM-4.7",
  "stream": false,
  "temperature": 0
}

### 智谱 GLM 调用
POST {{GLM_BASE_URL}} HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: {{GLM_BEARER_TOKEN}}

{
  "messages": [
    {
      "content": "{{main_prompt}} {{response_language}}",
      "role": "system"
    },
    {
      "content": "Hello, who are you?",
      "role": "user"
    }
  ],
  "model": "GLM-4.7",
  "stream": true,
  "temperature": 0
}

### 字数不等于 Token
POST {{DEEP_SEEK_BASE_URL}} HTTP/1.1
Content-Type: application/json
Accept: text/event-stream
Authorization: {{DEEP_SEEK_BEARER_TOKEN}}

{
  "messages": [
    {
      "content": "{{main_prompt}} {{response_language}}",
      "role": "system"
    },
    {
      "content": "Tell me a short story above 100 words.",
      "role": "user"
    }
  ],
  "max_tokens": 50,
  "model": "deepseek-chat",
  "stream": false,
  "temperature": 1
}

### Regular conversation
POST {{GLM_BASE_URL}} HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: {{GLM_BEARER_TOKEN}}

{
  "messages": [
    {
      "content": "{{main_prompt}} The company's main business is quantitative trading. ",
      "role": "system"
    },
    {
      "content": "Hello, who are you?",
      "role": "user"
    },
    {
      "content": "Hello! I'm Alice, your intelligent customer service agent. How can I assist you today?",
      "role": "assistant"
    },
    {
      "content": "I would like to inquire about your company's business.",
      "role": "user"
    }
  ],
  "model": "GLM-4.7",
  "stream": false,
  "temperature": 0
}

### Function calling conversation
POST {{GLM_BASE_URL}} HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: {{GLM_BEARER_TOKEN}}

{
  "messages": [
    {
      "content": "You are an intelligent customer service agent named Alice. Your main role is to help users answer their questions.",
      "role": "system"
    },
    {
      "content": "Hello, please check the weather in Hangzhou",
      "role": "user"
    }
  ],
  "model": "GLM-4.7",
  "tools": [
    {
      "type": "function",
        "function": {
            "name": "get_weather",
            "description": "Get weather information for a location.",
            "parameters": {
                "type": "object",
                "properties": {
                    "location": {
                        "type": "string",
                        "description": "The name of the city to get weather for. Only support low case location name, like beijing, shanghai, hangzhou, newyork"
                    }
                },
                "required": ["location"]
            }
        }
    }
  ],
  "stream": false,
  "temperature": 0
}

### Function calling conversation with tool call
POST {{GLM_BASE_URL}} HTTP/1.1
Content-Type: application/json
Accept: application/json
Authorization: {{GLM_BEARER_TOKEN}}

{
  "messages": [
    {
      "role": "system",
      "content": "You are an intelligent customer service agent named Alice. Your main role is to help users answer their questions."
    },
    {
      "role": "user",
      "content": "Hello, please check the weather in Hangzhou."
    },
    {
      "role": "assistant",
      "content": "I'll check the weather in Hangzhou for you right away.",
      "tool_calls": [
        {
          "index": 0,
          "id": "call_0_c9f112b0-766e-48ee-8b7d-a70c14f16b43",
          "type": "function",
          "function": {
            "name": "get_weather",
            "arguments": "{\"location\": \"hangzhou\"}"
          }
        }
      ]
    },
    {
      "role": "tool",
      "tool_call_id": "call_0_c9f112b0-766e-48ee-8b7d-a70c14f16b43",
      "content": "Sunny, 29°C"
    }
  ],
  "model": "GLM-4.7",
  "tools": [
    {
      "type": "function",
      "function": {
        "name": "get_weather",
        "description": "Get weather information for a location.",
        "parameters": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string",
              "description": "The name of the city to get weather for. Only support low case location name, like beijing, shanghai, hangzhou, newyork"
            }
          },
          "required": [
            "location"
          ]
        }
      }
    }
  ],
  "stream": false,
  "temperature": 0
}
