# æ’ä»¶ï¼šcode-review å¤šä»£ç†å®¡æŸ¥

## æ¦‚è¿°

Anthropic å®˜æ–¹çš„å¤šä»£ç† PR å®¡æŸ¥æ’ä»¶ï¼Œä½¿ç”¨ 5 ä¸ªå¹¶è¡Œä¸“å®¶ä»£ç†ä»ä¸åŒè§’åº¦å®¡æŸ¥ä»£ç ï¼Œå¹¶é€šè¿‡ç½®ä¿¡åº¦è¯„åˆ†è¿‡æ»¤ä½è´¨é‡å»ºè®®ã€‚

**ç±»å‹**: npm æ’ä»¶ï¼ˆå®˜æ–¹ Anthropic æä¾›ï¼‰
**å®‰è£…**: `/plugin install pr-review-toolkit`
**æä¾›æ–¹**: Anthropic å®˜æ–¹

**è§£å†³çš„æ ¸å¿ƒé—®é¢˜**ï¼š
- å•ä¸€ Claude å®ä¾‹å®¡æŸ¥ PR æ—¶è§†è§’å•ä¸€ï¼Œå®¹æ˜“é—æ¼æŸäº›ç»´åº¦çš„é—®é¢˜
- æ²¡æœ‰ç½®ä¿¡åº¦è¿‡æ»¤ï¼Œä¼šäº§ç”Ÿå¤§é‡ä½ä»·å€¼çš„"å™ªéŸ³"å»ºè®®
- æ— æ³•åŒæ—¶å…¼é¡¾åˆè§„æ€§æ£€æŸ¥ã€å†å²ä¸Šä¸‹æ–‡ã€ä»£ç æ³¨é‡Šç­‰å¤šä¸ªç»´åº¦

**ä¸ `code-review` Skill çš„å…³é”®åŒºåˆ«**ï¼š

| ç‰¹æ€§ | `code-review` Skill | code-review æ’ä»¶ |
|------|--------------------|--------------------|
| æ¶æ„ | å•æ¬¡ prompt å®¡æŸ¥ | 5 ä¸ªä¸“å®¶ä»£ç†å¹¶è¡Œ |
| è§†è§’ | é€šç”¨ä»£ç è´¨é‡ | å¤šä¸“ä¸šç»´åº¦ |
| å™ªéŸ³è¿‡æ»¤ | æ—  | ç½®ä¿¡åº¦è¯„åˆ†ï¼ˆ0-100ï¼‰ |
| ä¸Šä¸‹æ–‡ | å½“å‰ PR | å†å² PR + Git å†å² |
| é€Ÿåº¦ | å¿« | æ…¢ï¼ˆå¹¶è¡Œå¤šä»£ç†ï¼‰ |
| é€‚ç”¨åœºæ™¯ | å¿«é€Ÿæ£€æŸ¥ | é‡è¦ PR æ·±åº¦å®¡æŸ¥ |

---

## å®‰è£…

```bash
# åœ¨ Claude Code ä¼šè¯ä¸­
/plugin install pr-review-toolkit
```

éªŒè¯å®‰è£…ï¼š

```bash
> /pr-review-toolkit --version
```

---

## å·¥ä½œåŸç†ï¼š5 ä¸ªä¸“å®¶ä»£ç†

```
PR #123 æäº¤
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ä»£ç†åè°ƒå™¨ï¼ˆOrchestratorï¼‰     â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚      â”‚      â”‚      â”‚      â”‚
   â–¼      â–¼      â–¼      â–¼      â–¼
â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”
â”‚ A  â”‚ â”‚ B  â”‚ â”‚ C  â”‚ â”‚ D  â”‚ â”‚ E  â”‚
â”‚åˆè§„â”‚ â”‚Bug â”‚ â”‚å†å²â”‚ â”‚PR  â”‚ â”‚æ³¨é‡Šâ”‚
â”‚æ£€æŸ¥â”‚ â”‚æ£€æµ‹â”‚ â”‚ä¸Šä¸‹â”‚ â”‚å‚è€ƒâ”‚ â”‚éªŒè¯â”‚
â”‚    â”‚ â”‚    â”‚ â”‚æ–‡  â”‚ â”‚    â”‚ â”‚    â”‚
â””â”€â”¬â”€â”€â”˜ â””â”€â”¬â”€â”€â”˜ â””â”€â”¬â”€â”€â”˜ â””â”€â”¬â”€â”€â”˜ â””â”€â”¬â”€â”€â”˜
  â”‚      â”‚      â”‚      â”‚      â”‚
  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        ç½®ä¿¡åº¦è¯„åˆ†è¿‡æ»¤
        ï¼ˆé»˜è®¤é˜ˆå€¼: 80ï¼‰
                â”‚
                â–¼
          æœ€ç»ˆå®¡æŸ¥æŠ¥å‘Š
```

### ä»£ç† Aï¼šCLAUDE.md åˆè§„æ€§æ£€æŸ¥

æ£€æŸ¥ä»£ç å˜æ›´æ˜¯å¦ç¬¦åˆé¡¹ç›® `CLAUDE.md` ä¸­å®šä¹‰çš„è§„èŒƒï¼š

```
æ£€æŸ¥é¡¹ç›®:
âœ“ ä»£ç é£æ ¼è§„èŒƒï¼ˆå‘½åã€æ ¼å¼ï¼‰
âœ“ æ¶æ„è§„èŒƒï¼ˆä¸å…è®¸ç›´æ¥æ•°æ®åº“è°ƒç”¨ç­‰ï¼‰
âœ“ ç¦æ­¢ä½¿ç”¨çš„æ¨¡å¼ï¼ˆå¦‚å…¨å±€å˜é‡ï¼‰
âœ“ å¿…é¡»åŒ…å«çš„å…ƒç´ ï¼ˆå¦‚ç±»å‹æ³¨è§£ï¼‰
```

### ä»£ç† Bï¼šBug æ£€æµ‹

ä¸“æ³¨äºä»£ç æ­£ç¡®æ€§ï¼š

```
æ£€æŸ¥é¡¹ç›®:
âœ“ ç©ºæŒ‡é’ˆ/æœªå®šä¹‰è®¿é—®
âœ“ è¾¹ç•Œæ¡ä»¶å¤„ç†
âœ“ å¹¶å‘å®‰å…¨æ€§
âœ“ èµ„æºæ³„æ¼
âœ“ å¼‚æ­¥é”™è¯¯å¤„ç†
```

### ä»£ç† Cï¼šGit å†å²ä¸Šä¸‹æ–‡

åˆ†æ Git æäº¤å†å²ï¼Œç†è§£å˜æ›´èƒŒæ™¯ï¼š

```
æ£€æŸ¥é¡¹ç›®:
âœ“ æ˜¯å¦ä¸å†å²ä¿®å¤ç›¸å†²çª
âœ“ æ˜¯å¦é‡æ–°å¼•å…¥å·²ä¿®å¤çš„ Bug
âœ“ æ˜¯å¦ç¬¦åˆè¯¥æ–‡ä»¶çš„æ¼”åŒ–æ–¹å‘
âœ“ ä½œè€…çš„å†å²æäº¤è´¨é‡
```

### ä»£ç† Dï¼šå†å² PR è¯„è®ºå‚è€ƒ

ä»ä»¥å¾€ PR è¯„è®ºä¸­å­¦ä¹ é¡¹ç›®è§„èŒƒï¼š

```
æ£€æŸ¥é¡¹ç›®:
âœ“ æ˜¯å¦é‡å¤å‡ºç°è¿‡è¢«æ‹’ç»çš„æ¨¡å¼
âœ“ æ˜¯å¦ç¬¦åˆå›¢é˜Ÿåå¤å¼ºè°ƒçš„è§„èŒƒ
âœ“ æ˜¯å¦é‡‡ç”¨äº†å†å² PR ä¸­æ¨èçš„æ”¹è¿›æ–¹å¼
```

### ä»£ç† Eï¼šä»£ç æ³¨é‡ŠéªŒè¯

æ£€æŸ¥æ³¨é‡Šè´¨é‡å’Œå‡†ç¡®æ€§ï¼š

```
æ£€æŸ¥é¡¹ç›®:
âœ“ æ³¨é‡Šæ˜¯å¦å‡†ç¡®æè¿°ä»£ç è¡Œä¸º
âœ“ å¤æ‚é€»è¾‘æ˜¯å¦æœ‰å……åˆ†è¯´æ˜
âœ“ TODO/FIXME æ˜¯å¦æœ‰è¿½è¸ª
âœ“ API æ–‡æ¡£æ˜¯å¦å®Œæ•´
```

---

## ç½®ä¿¡åº¦è¯„åˆ†æœºåˆ¶

æ¯ä¸ªä»£ç†çš„å»ºè®®ä¼šé™„å¸¦ç½®ä¿¡åº¦åˆ†æ•°ï¼ˆ0-100ï¼‰ï¼š

| ç½®ä¿¡åº¦ | å«ä¹‰ | é»˜è®¤å¤„ç† |
|--------|------|---------|
| 90-100 | å‡ ä¹ç¡®å®šæ˜¯é—®é¢˜ | æ˜¾ç¤ºï¼Œæ ‡è®°ä¸º Critical |
| 80-89 | å¯èƒ½æ˜¯é—®é¢˜ | æ˜¾ç¤ºï¼Œæ ‡è®°ä¸º Warning |
| 60-79 | ä¸ç¡®å®š | é»˜è®¤è¿‡æ»¤ï¼ˆä½äºé˜ˆå€¼ï¼‰ |
| 0-59 | å¯èƒ½è¯¯æŠ¥ | è¿‡æ»¤ |

**è°ƒæ•´é˜ˆå€¼**ï¼š

```bash
# é»˜è®¤é˜ˆå€¼ 80ï¼ˆæ¨èï¼‰
> /pr-review-toolkit 123

# ä¸¥æ ¼æ¨¡å¼ï¼ˆé˜ˆå€¼ 90ï¼Œåªæ˜¾ç¤ºé«˜ç½®ä¿¡åº¦é—®é¢˜ï¼‰
> /pr-review-toolkit 123 --confidence 90

# å®½æ¾æ¨¡å¼ï¼ˆé˜ˆå€¼ 60ï¼Œæ˜¾ç¤ºæ›´å¤šå»ºè®®ï¼‰
> /pr-review-toolkit 123 --confidence 60
```

---

## å®é™…æ¼”ç¤º

### åŸºç¡€ç”¨æ³•

```bash
$ claude

> /pr-review-toolkit 42
```

**è¾“å‡ºç¤ºä¾‹**ï¼š

```markdown
## Multi-Agent PR Review: #42 (Add payment processing)

**å®¡æŸ¥ä»£ç†**: 5/5 å®Œæˆ
**æ€»å»ºè®®æ•°**: 23 æ¡åŸå§‹å»ºè®® â†’ 8 æ¡é€šè¿‡ç½®ä¿¡åº¦è¿‡æ»¤ï¼ˆé˜ˆå€¼ 80ï¼‰

---

### ğŸ”´ Critical (ç½®ä¿¡åº¦ â‰¥ 90)

#### [Bug æ£€æµ‹] æ”¯ä»˜é‡‘é¢æœªå¤„ç†æµ®ç‚¹ç²¾åº¦é—®é¢˜
**æ–‡ä»¶**: `src/payment/calculator.ts:34`
**ç½®ä¿¡åº¦**: 95

```typescript
// âŒ å½“å‰ä»£ç  - æµ®ç‚¹ç²¾åº¦é—®é¢˜
const total = price * quantity;

// âœ… å»ºè®®
const total = Math.round(price * quantity * 100) / 100;
// æˆ–ä½¿ç”¨ decimal.js åº“å¤„ç†è´§å¸è®¡ç®—
```

**åŸå› **: æµ®ç‚¹æ•°è¿ç®—åœ¨è´§å¸åœºæ™¯ä¸‹å¯èƒ½å¯¼è‡´è®¡ç®—é”™è¯¯ï¼Œå¦‚ 0.1 + 0.2 â‰  0.3

---

#### [åˆè§„æ£€æŸ¥] ç›´æ¥åœ¨ Controller ä¸­è®¿é—®æ•°æ®åº“
**æ–‡ä»¶**: `src/api/payment.controller.ts:67`
**ç½®ä¿¡åº¦**: 92

æ ¹æ® CLAUDE.md è§„èŒƒï¼šController å±‚ç¦æ­¢ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œå¿…é¡»é€šè¿‡ Service å±‚

---

### ğŸŸ¡ Warning (ç½®ä¿¡åº¦ 80-89)

#### [å†å²å‚è€ƒ] é‡å¤å‡ºç°çš„é”™è¯¯å¤„ç†æ¨¡å¼
**ç½®ä¿¡åº¦**: 83

PR #31ã€#38 ä¸­å‡æåˆ°è¿‡è¿™ç§é”™è¯¯å¤„ç†æ–¹å¼ä¸ç¬¦åˆå›¢é˜Ÿè§„èŒƒï¼Œå»ºè®®ä½¿ç”¨ç»Ÿä¸€çš„ ErrorHandler ç±»

---

### ğŸ“Š å®¡æŸ¥ç»Ÿè®¡

| ä»£ç† | åŸå§‹å»ºè®® | é€šè¿‡è¿‡æ»¤ | ä¸»è¦å‘ç° |
|------|---------|---------|---------|
| CLAUDE.md åˆè§„ | 5 | 2 | æ¶æ„è¿è§„ |
| Bug æ£€æµ‹ | 8 | 3 | æµ®ç‚¹ç²¾åº¦ã€ç©ºæŒ‡é’ˆ |
| Git å†å² | 3 | 1 | ä¸å†å²ä¿®å¤å†²çª |
| PR å‚è€ƒ | 4 | 1 | é‡å¤æ¨¡å¼ |
| æ³¨é‡ŠéªŒè¯ | 3 | 1 | ç¼ºå°‘ API æ–‡æ¡£ |

**ç»“è®º**: ğŸ”´ **Request Changes** - åœ¨ä¿®å¤æ”¯ä»˜è®¡ç®—ç²¾åº¦é—®é¢˜å‰ä¸å»ºè®®åˆå¹¶
```

---

## GitHub Actions é›†æˆ

```yaml
# .github/workflows/multi-agent-review.yml
name: Multi-Agent PR Review

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0  # è·å–å®Œæ•´å†å²ï¼ˆä»£ç† C éœ€è¦ï¼‰

      - name: Setup Claude Code
        run: npm install -g @anthropic-ai/claude-code

      - name: Install pr-review-toolkit
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        run: claude --print "/plugin install pr-review-toolkit"

      - name: Run Multi-Agent Review
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          claude --print "/pr-review-toolkit ${{ github.event.pull_request.number }} --confidence 85" \
            | gh pr comment ${{ github.event.pull_request.number }} --body-file -
```

---

## å¸¸è§é—®é¢˜

### Q1: ä¸ `code-review` Skill å¦‚ä½•é€‰æ‹©ï¼Ÿ

**A**:
- æ—¥å¸¸å¿«é€Ÿå®¡æŸ¥ â†’ ç”¨ `code-review` Skillï¼ˆæ›´å¿«ï¼‰
- é‡è¦åŠŸèƒ½ PRã€å®‰å…¨æ•æ„Ÿä»£ç  â†’ ç”¨ `pr-review-toolkit`ï¼ˆæ›´æ·±å…¥ï¼‰

### Q2: 5 ä¸ªä»£ç†ä¼šæ¶ˆè€—å¾ˆå¤š Token å—ï¼Ÿ

**A**: æ˜¯çš„ï¼Œæ¯”å•æ¬¡å®¡æŸ¥å¤§çº¦å¤šæ¶ˆè€— 3-4 å€ Tokenã€‚å»ºè®®å¯¹é‡è¦ PR ä½¿ç”¨ã€‚

### Q3: ç½®ä¿¡åº¦è¯„åˆ†æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ

**A**: æ¯ä¸ªä»£ç†åŸºäºä»¥ä¸‹å› ç´ ä¼°ç®—ï¼šä¸Šä¸‹æ–‡ä¿¡æ¯å®Œæ•´æ€§ã€æ¨¡å¼åŒ¹é…ç¡®å®šæ€§ã€å†å²æ•°æ®æ”¯æŒåº¦ã€‚å…·ä½“ç®—æ³•ç”± Anthropic å†…éƒ¨å®ç°ã€‚

### Q4: å¯ä»¥åªå¯ç”¨éƒ¨åˆ†ä»£ç†å—ï¼Ÿ

```bash
# åªè¿è¡Œ Bug æ£€æµ‹å’Œåˆè§„æ£€æŸ¥ä»£ç†
> /pr-review-toolkit 123 --agents bug,compliance
```

---

## æŠ€å·§ä¸æœ€ä½³å®è·µ

### åœ¨ CLAUDE.md ä¸­å®šä¹‰è§„èŒƒ

ä»£ç† A çš„æ•ˆæœå–å†³äº `CLAUDE.md` çš„è¯¦ç»†ç¨‹åº¦ï¼š

```markdown
# CLAUDE.md

## ä»£ç è§„èŒƒï¼ˆpr-review-toolkit å‚è€ƒï¼‰

### ç¦æ­¢çš„æ¨¡å¼
- Controller å±‚ç›´æ¥è®¿é—®æ•°æ®åº“
- ä½¿ç”¨ `any` ç±»å‹
- æœªå¤„ç†çš„ Promise rejection

### å¿…é¡»åŒ…å«
- æ‰€æœ‰å…¬å…±å‡½æ•°çš„ JSDoc
- æ•°æ®å˜æ›´æ“ä½œçš„äº‹åŠ¡å¤„ç†
- å¤–éƒ¨ API è°ƒç”¨çš„è¶…æ—¶è®¾ç½®
```

### é’ˆå¯¹ä¸åŒ PR ç±»å‹è°ƒæ•´ç­–ç•¥

```bash
# å®‰å…¨ç›¸å…³ PRï¼šä¸¥æ ¼æ¨¡å¼
> /pr-review-toolkit 123 --confidence 90 --focus security

# é‡æ„ PRï¼šå…³æ³¨åˆè§„å’Œå†å²
> /pr-review-toolkit 123 --agents compliance,history

# æ–‡æ¡£ PRï¼šåªéœ€æ³¨é‡ŠéªŒè¯
> /pr-review-toolkit 123 --agents comments
```

---

## ç›¸å…³å·¥å…·

- [code-review Skill](../official-skills/code-review.md) - å¿«é€Ÿå•ä»£ç†å®¡æŸ¥
- [claude-squad](./claude-squad.md) - å¤šä»£ç†å¹¶è¡Œå¤„ç†å…¶ä»–ä»»åŠ¡

---

**æ’ä»¶ç‰ˆæœ¬**: å®˜æ–¹æœ€æ–°
**æœ€åæ›´æ–°**: 2026-02-10
